<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO -->
    <title>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏•‡∏∞‡∏Ñ‡∏£ - DramaBox</title>
    <meta name="description" content="‡∏£‡∏±‡∏ö‡∏ä‡∏°‡∏•‡∏∞‡∏Ñ‡∏£‡∏ó‡∏µ‡πà DramaBox ‡∏™‡∏ï‡∏£‡∏µ‡∏°‡∏ü‡∏£‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23E50914'/><path d='M20 45 L80 45 L80 75 L20 75 Z' fill='white'/><path d='M20 45 L80 45 L70 30 L30 30 Z' fill='white' opacity='0.8'/></svg>">

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar scrolled" id="navbar">
        <div class="navbar-brand">
            <a href="index.html" style="display: flex; align-items: center; gap: 0.5rem;">
                <span class="logo-icon"><i data-lucide="clapperboard"></i></span>
                <span class="logo">DramaBox</span>
            </a>
        </div>

        <ul class="nav-links">
            <li><a href="index.html" class="nav-link">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
            <li><a href="search.html" class="nav-link">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</a></li>
            <li><a href="search.html?type=trending" class="nav-link">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Æ‡∏¥‡∏ï</a></li>
            <li><a href="search.html?type=latest" class="nav-link">‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</a></li>
        </ul>

        <div class="nav-right">
            <a href="search.html" style="font-size: 1.25rem;"><i data-lucide="search"></i></a>
        </div>
    </nav>

    <!-- Detail Content -->
    <main id="detailContent" class="hidden">
        <!-- Detail Hero -->
        <section class="detail-hero">
            <div class="detail-backdrop">
                <img src="" alt="" id="detailBackdrop">
            </div>
            <div class="detail-content">
                <div class="detail-poster">
                    <img src="" alt="" id="detailPoster">
                </div>
                <div class="detail-info">
                    <h1 class="detail-title" id="detailTitle">Loading...</h1>
                    <div class="detail-meta" id="detailMeta">
                        <span class="detail-meta-item"><i data-lucide="tv" class="icon-sm"></i> <span
                                id="episodeCount">0</span> ‡∏ï‡∏≠‡∏ô</span>
                        <span class="detail-meta-item"><i data-lucide="flame" class="icon-sm"></i> <span
                                id="hotCount">0</span></span>
                    </div>
                    <div class="detail-tags" id="detailTags"></div>
                    <p class="detail-synopsis" id="detailSynopsis"></p>
                    <p class="detail-protagonist" id="detailProtagonist"></p>
                    <div class="hero-actions">
                        <button class="btn btn-primary" id="watchBtn" onclick="watchFirstEpisode()">
                            <span class="btn-icon"><i data-lucide="play"></i></span> ‡∏£‡∏±‡∏ö‡∏ä‡∏°‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1
                        </button>
                        <button class="btn btn-secondary" id="favoriteBtn" onclick="toggleFavorite()">
                            <span class="btn-icon"><i data-lucide="heart" id="favoriteIcon"></i></span> <span
                                id="favoriteText">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="episodes-section">
            <div class="episodes-header">
                <h2 class="episodes-title"><i data-lucide="list"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ô</h2>
                <span class="episodes-count" id="episodesCount">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≠‡∏ô...</span>
            </div>
            <div class="episodes-grid" id="episodesGrid">
                <!-- Episodes will be loaded here -->
            </div>
        </section>
    </main>

    <!-- Error State -->
    <div id="errorState" class="hidden"
        style="min-height: 100vh; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 1rem; padding: 2rem;">
        <div style="font-size: 4rem;"><i data-lucide="frown" style="width: 64px; height: 64px;"></i></div>
        <h2 style="font-size: 1.5rem;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏∞‡∏Ñ‡∏£</h2>
        <p style="color: var(--text-muted);">‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏∞‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
        <a href="index.html" class="btn btn-primary">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    </div>

    <!-- Footer -->
    <footer class="footer" id="footer" style="display: none;">
        <div class="footer-content">
            <div>
                <div class="footer-brand"><i data-lucide="clapperboard"></i> DramaBox</div>
                <p class="footer-text">
                    Streaming drama terbaik dengan koleksi lengkap dari berbagai genre.
                    Nikmati drama trending, terbaru, dan rekomendasi khusus untukmu.
                </p>
            </div>
            <div>
                <h4 class="footer-title">Jelajahi</h4>
                <ul class="footer-links">
                    <li><a href="search.html?type=trending" class="footer-link">Trending</a></li>
                    <li><a href="search.html?type=latest" class="footer-link">Terbaru</a></li>
                    <li><a href="search.html?type=foryou" class="footer-link">Untukmu</a></li>
                    <li><a href="search.html?type=vip" class="footer-link">VIP</a></li>
                </ul>
            </div>
            <div>
                <h4 class="footer-title">Genre</h4>
                <ul class="footer-links">
                    <li><a href="search.html?q=romance" class="footer-link">Romance</a></li>
                    <li><a href="search.html?q=action" class="footer-link">Action</a></li>
                    <li><a href="search.html?q=comedy" class="footer-link">Comedy</a></li>
                    <li><a href="search.html?q=drama" class="footer-link">Drama</a></li>
                </ul>
            </div>
            <div>
                <h4 class="footer-title">Lainnya</h4>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">Tentang Kami</a></li>
                    <li><a href="#" class="footer-link">Kontak</a></li>
                    <li><a href="#" class="footer-link">FAQ</a></li>
                    <li><a href="#" class="footer-link">Kebijakan Privasi</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2026 DramaBox. Powered by DramaBox API.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/drama.js"></script>
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Toggle favorite function
        function toggleFavorite() {
            const isFav = storage.toggleFavorite({
                dramaId: bookId,
                dramaName: dramaData?.bookName || dramaData?.name || 'Drama',
                cover: dramaData?.bookCover || dramaData?.cover || '',
                totalEpisodes: episodesData?.length || 0
            });

            updateFavoriteButton(isFav);

            Swal.fire({
                icon: 'success',
                title: isFav ? '‚ù§Ô∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß' : 'üíî ‡∏•‡∏ö‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß',
                timer: 1000,
                showConfirmButton: false,
                background: 'linear-gradient(145deg, #1e1e1e, #2d2d2d)',
                color: '#fff'
            });
        }

        // Update favorite button state
        function updateFavoriteButton(isFav) {
            const icon = document.getElementById('favoriteIcon');
            const text = document.getElementById('favoriteText');
            const btn = document.getElementById('favoriteBtn');

            if (isFav) {
                icon.style.fill = '#E50914';
                icon.style.color = '#E50914';
                text.textContent = '‡∏•‡∏ö‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î';
                btn.classList.add('active');
            } else {
                icon.style.fill = 'none';
                icon.style.color = 'inherit';
                text.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î';
                btn.classList.remove('active');
            }
            lucide.createIcons();
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (typeof bookId !== 'undefined' && bookId) {
                    updateFavoriteButton(storage.isFavorite(bookId));
                }
            }, 1000);
        });
    </script>
</body>

</html>